{% extends 'base.html' %}

{% load macros %}
{% load filters %}
{% load prospector_filters %}

{% loadmacros 'show_data.html' %}

{% block title %}Contact : {{obj.person_name}}{% endblock %}
{% block subtitle %}{{obj.email_address | default:'Pas d\'adresse mail °o°'}}{% endblock %}
{% block active_menu %}contacts{% endblock %}

{% block content %}

<div class="card mb-2">
    <div class="card-header">
        <div class="card-title h4">Deals liés</div>
    </div>
    <div class="card-body">
        <nicetable>
            <rows>
                {% for d in qs %}
                    <r>
                        <d><a href="{% url 'prospector:deals.show' pk=d.pk %}">{{d}}</a></d>
                        <d>{{d.get_type_display}}</d>
                        <d>{{d.get_price_display}}</d>
                        <d>
                            <div>
                                <!-- faire avec views utiles -->
                                <button class="btn btn-sm float-right">view utile</button>
                            </div>
                        </d>
                    </r>
                {% endfor %}
            </rows>
        </nicetable>
    </div>
</div>

<div class="card mb-2">
    <div class="card-body">
        {% call showdata show_data %}{% endcall %}
    </div>
    <div class="card-footer">
        <button class="btn btn-primary">Mail données manquantes</button>
        <div class="float-right">
            <button class="btn btn-error">Supprimer</button>
            <button class="btn btn-primary">Éditer</button>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script>
    var t = new NiceTable($('nicetable'), ['Nom', 'Type', 'Prix', '<search>']);
</script>
{% endblock %}
